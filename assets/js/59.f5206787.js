(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{471:function(v,_,t){"use strict";t.r(_);var r=t(2),s=Object(r.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h2",{attrs:{id:"前言"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[v._v("#")]),v._v(" 前言")]),v._v(" "),_("p",[v._v("衡量Web性能有一个指标"),_("strong",[v._v("FP（First Paint）：页面加载到首次开始绘制的时长")]),v._v("。该指标直接影响用户的"),_("strong",[v._v("跳出率")]),v._v("，更快的页面响应意味着更多的PV、更高的转化率。"),_("br"),v._v(" "),_("strong",[v._v("网络加载速度")]),v._v("是影响FP的一个重要指标。"),_("br"),v._v("\nHTTP、WebSocket，它们都是基于TCP/IP的。")]),v._v(" "),_("h2",{attrs:{id:"互联网-一套理念和协议组成的体系架构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#互联网-一套理念和协议组成的体系架构"}},[v._v("#")]),v._v(" 互联网 -- 一套理念和协议组成的体系架构")]),v._v(" "),_("p",[v._v("协议是一套众所周知的"),_("strong",[v._v("规则和标准")]),v._v("，如果各方都同意使用，那么通信将变得毫无障碍。"),_("br"),v._v("\n互联网传输是通过"),_("strong",[v._v("数据包")]),v._v("进程传输的，一个大的文件数据一般会被拆分成很多的"),_("strong",[v._v("数据包")]),v._v("来进行传输，并非一个大的文件一次性传输的，但是数据包在传输的过程中会有很大概率会丢失或出错。")]),v._v(" "),_("h2",{attrs:{id:"ip-传输数据包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ip-传输数据包"}},[v._v("#")]),v._v(" IP -- 传输数据包")]),v._v(" "),_("p",[v._v("数据包要在互联网上进行传输，就需要符合"),_("strong",[v._v("网际协议（IP -- Internet Protocol）"),_("strong",[v._v("标准。只要是在互联网上在线的设备都有")]),v._v("唯一的地址")]),v._v("。"),_("br"),v._v(" "),_("strong",[v._v("计算机的地址就称为IP地址，访问网站实际是一台计算机向另一台计算机请求数据信息。")]),_("br"),v._v("\nA主机想把数据包发送给B主机，传输之前，数据包会被附加上B主机的IP地址信息，另外也会附加上A主机本身的IP地址，有了这些信息，B主机才能回复信息给A主机，附加的信息会被放到"),_("strong",[v._v("IP头")]),v._v("（IP数据包开头信息）的数据结构中"),_("br"),v._v("\nIP头：")]),v._v(" "),_("ul",[_("li",[v._v("IP版本")]),v._v(" "),_("li",[v._v("源IP地址")]),v._v(" "),_("li",[v._v("目标IP地址")]),v._v(" "),_("li",[v._v("有效时间\n"),_("img",{attrs:{src:"https://s2.loli.net/2022/08/31/uIthdMJCU5fPQ32.png",alt:"IP传输数据包"}})])]),v._v(" "),_("h2",{attrs:{id:"udp-指定数据包送达的应用程序"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#udp-指定数据包送达的应用程序"}},[v._v("#")]),v._v(" UDP -- 指定数据包送达的应用程序")]),v._v(" "),_("p",[v._v("基于IP之上开发的能和应用程序通讯的协议，"),_("strong",[v._v("用户数据包协议（User Datagram Protocol）")]),v._v("。"),_("br"),v._v("\nUDP重要的关键是端口号，每个想要"),_("strong",[v._v("访问网络的程序都是需要绑定一个端口号的")]),v._v("。通过端口号UDP就能把指定的数据包发送给指定的程序，类似于IP根据IP地址信息把数据包发送给指定的电脑主机，所以端口号会被放到"),_("strong",[v._v("UDP头")]),v._v("中，"),_("strong",[v._v("UDP头 + 原始数据包组合成新的UDP数据包")]),v._v("。"),_("br"),v._v("\nUDP头一般包含：")]),v._v(" "),_("ul",[_("li",[v._v("源端口号")]),v._v(" "),_("li",[v._v("目标端口号")])]),v._v(" "),_("p",[v._v("为了支持UDP协议，IP地址传输的三层结构扩充为四层结构，"),_("strong",[v._v("在网络层和上层之间增加传输层")]),v._v("。"),_("br"),v._v("\n优点：UDP传输速度快，UDP一般应用在一些关注速度，对于数据完整性要求不严格的领域（在线视频、互动游戏）。"),_("br"),v._v("\n缺点：UDP不能保证数据可靠性，使用UDP发送数据时候，有很多因素导致数据包出错，虽然UDP可以校验数据是否正确，但是对于错误的数据包"),_("strong",[v._v("UDP并不提供重发机制，只是丢弃当前的包")]),v._v("，并且UDP在发送之后也无法知道是否到达目标主机。\n"),_("img",{attrs:{src:"https://s2.loli.net/2022/08/31/Dq6ZSOok7ECr4Bu.png",alt:"UDP传输数据"}})]),v._v(" "),_("h2",{attrs:{id:"tcp-确保数据包完整送达应用程序"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tcp-确保数据包完整送达应用程序"}},[v._v("#")]),v._v(" TCP -- 确保数据包完整送达应用程序")]),v._v(" "),_("p",[v._v("对于浏览器or邮件此类要求数据传输可靠性（reliability）的应用，如果使用UDP传输会存在两个问题：")]),v._v(" "),_("ul",[_("li",[v._v("数据包传输过程中容易丢失")]),v._v(" "),_("li",[v._v("大文件被拆分成很多小的数据包进行传输，小的数据包经过不同的路由，在不同的时间点到达目标主机，UDP协议是无法知道组装这些数据包还原完整的文件")])]),v._v(" "),_("p",[v._v("所以引入了"),_("strong",[v._v("TCP（Transmission Control Protocol，传输控制协议）")]),v._v("，是一种面向连接的、可靠的、基于字节流的传输层通信协议。"),_("br"),v._v("\nTCP机制：")]),v._v(" "),_("ul",[_("li",[v._v("对于数据包丢失，TCP"),_("strong",[v._v("支持重传机制")])]),v._v(" "),_("li",[v._v("TCP引入"),_("strong",[v._v("数据包排序机制")]),v._v("，确保乱序的数据包能组装还原成完整的文件")])]),v._v(" "),_("p",[v._v("TCP头：")]),v._v(" "),_("ul",[_("li",[v._v("本机端口号")]),v._v(" "),_("li",[v._v("目标端口号")]),v._v(" "),_("li",[v._v("排序序列号（便于接收端通过序号重排数据包）\n"),_("img",{attrs:{src:"https://s2.loli.net/2022/08/31/lUzuExKdXgj9IMV.png",alt:"TCP传输数据"}})])]),v._v(" "),_("h3",{attrs:{id:"tcp连接生命周期"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tcp连接生命周期"}},[v._v("#")]),v._v(" TCP连接生命周期")]),v._v(" "),_("ol",[_("li",[v._v("建立连接"),_("br"),v._v("\n通过"),_("strong",[v._v("三次握手")]),v._v("，客户端服务端建立连接。"),_("br"),v._v("\nTCP提供"),_("strong",[v._v("面向连接的通信传输")]),v._v("。面向连接是指在数据传输之前先做好两端之间连接的准备工作。"),_("br"),v._v("\n三次握手是指建立一个TCP连接时，客户端服务端总共需"),_("strong",[v._v("发送三个数据包来确认连接建立")]),v._v("。")]),v._v(" "),_("li",[v._v("传输数据"),_("br"),v._v("\n重发机制：接受端需要对每个数据包进行确认操作，接受端接收到数据包后，需要"),_("strong",[v._v("发送”确认数据包”给发送端")]),v._v("。当发送端发送一个数据包，规定时间内没有接收到接收端反馈的确认消息，则判断数据丢失，触发发送端重发机制。"),_("br"),v._v("\n序号排序：一个大文件传输过程被拆分成很多数据包，数据包到达接收端后，接收端按照TCP头中的序号进行排序，确保组装成完整的数据。")]),v._v(" "),_("li",[v._v("断开连接"),_("br"),v._v("\n四次挥手确保双方断开连接。")])]),v._v(" "),_("p",[_("strong",[v._v("TCP为了保证数据传输的可靠性，牺牲了数据包的传输速度，因为“三次握手”和“数据包校验机制”等把传输过程中的数据包的数量提高了一倍。")]),v._v(" "),_("img",{attrs:{src:"https://s2.loli.net/2022/08/31/4bAewXG1HYNrnfo.png",alt:"TCP连接流程"}})]),v._v(" "),_("h2",{attrs:{id:"总结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[v._v("#")]),v._v(" 总结")]),v._v(" "),_("ul",[_("li",[v._v("互联网通过数据包来传输信息，数据包在传输过程容易丢失出错")]),v._v(" "),_("li",[v._v("IP负责把数据包送达给目标主机")]),v._v(" "),_("li",[v._v("UDP负责把数据包送达具体应用")]),v._v(" "),_("li",[v._v("TCP确保了数据传输的完整性，牺牲了数据包传输速度")]),v._v(" "),_("li",[v._v("TCP连接三个阶段：建立、传输、断开")])])])}),[],!1,null,null,null);_.default=s.exports}}]);
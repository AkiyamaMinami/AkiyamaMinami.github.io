(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{465:function(s,t,a){"use strict";a.r(t);var n=a(2),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" a "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" b "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a\n  a "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" a "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" b "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a\n  a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// { name: '1'  }")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// { name: '1'  }")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 为啥只是修改了a，但是b也被同时修改了呢？")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h2",{attrs:{id:"javascript语言类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#javascript语言类型"}},[s._v("#")]),s._v(" JavaScript语言类型")]),s._v(" "),t("p",[s._v("每种编程语言都会内置各自的数据类型，一般数据类型都会有一些不同，使用上也会有区别。"),t("br"),s._v("\n常见的语言类型：")]),s._v(" "),t("ul",[t("li",[s._v("静态："),t("strong",[s._v("声明变量之前需要先定义变量类型")]),s._v(" => C、C++、Java")]),s._v(" "),t("li",[s._v("动态："),t("strong",[s._v("声明变量之前无需确认数据类型，运行时检查数据类型")]),s._v(" => JavaScript")]),s._v(" "),t("li",[s._v("强类型："),t("strong",[s._v("不支持隐式类型转换")]),s._v(" => Java")]),s._v(" "),t("li",[s._v("弱类型："),t("strong",[s._v("支持隐式类型转换")]),s._v(" => C、C++、JavaScript")])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[s._v("所以JavaScript是动态、弱类型语言。")])]),t("h2",{attrs:{id:"javascript数据类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#javascript数据类型"}},[s._v("#")]),s._v(" JavaScript数据类型")]),s._v(" "),t("ul",[t("li",[s._v("动态 => 无需告诉JavaScript引擎变量是什么数据类型，JavaScript引擎运行代码的时候自己推算！")]),s._v(" "),t("li",[s._v("弱类型 => 可以使用同一个变量保存不同类型的数据。")])]),s._v(" "),t("p",[s._v("使用"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof",target:"_blank",rel:"noopener noreferrer"}},[s._v("typeof"),t("OutboundLink")],1),s._v("运算符来查看变量数据类型。")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" bar\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" bar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// undefined")]),s._v("\nbar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// number")]),s._v("\nbar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"233"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// string")]),s._v("\nbar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// boolean")]),s._v("\nbar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// object => 初期JavaScript语言的Bug，保留至今，没修复为了兼容老的代码。")]),s._v("\nbar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"233"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// object")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("bar")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// function")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("JavaScript中的数据类型有8种：")]),s._v(" "),t("ul",[t("li",[s._v("Undefined => 未赋值变量的默认值、变量提升默认值")]),s._v(" "),t("li",[s._v("Null => 只有一个值null")]),s._v(" "),t("li",[s._v("String => JavaScript字符串不可更改")]),s._v(" "),t("li",[s._v("Number => ES标准：基于IEEE754标准双精度64位二进制格式值，范围-(263 - 1) ~ 263 - 1")]),s._v(" "),t("li",[s._v("Boolean => true | false")]),s._v(" "),t("li",[s._v("Symbol => 符号类型表示唯一且不可修改，一般用于Object的key")]),s._v(" "),t("li",[s._v("BigInt => 可以任意精度表示整数，即时超出Number整数范围也能安全存储")]),s._v(" "),t("li",[s._v("Object => 对象被看做一组属性的集合。key-value组成，vaule可以是任何类型（包括函数），Object中的函数又称为"),t("strong",[s._v("方法")])])]),s._v(" "),t("p",[s._v("前7种数据类型称为"),t("strong",[s._v("原始类型")]),s._v("，最后的对象类型称为"),t("strong",[s._v("引用类型")]),s._v("。之所以区分原因就是他们在"),t("strong",[s._v("内存中存放的位置不同")]),s._v("。")]),s._v(" "),t("h2",{attrs:{id:"内存空间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内存空间"}},[s._v("#")]),s._v(" 内存空间")]),s._v(" "),t("h3",{attrs:{id:"javascript内存模型概览"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#javascript内存模型概览"}},[s._v("#")]),s._v(" JavaScript内存模型概览")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2022/09/30/koujEziCeFpS256.png",alt:"JS内存空间.png"}})]),s._v(" "),t("h3",{attrs:{id:"代码内存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码内存"}},[s._v("#")]),s._v(" 代码内存")]),s._v(" "),t("p",[s._v("代码内存主要用于存储可执行代码。")]),s._v(" "),t("h3",{attrs:{id:"栈内存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#栈内存"}},[s._v("#")]),s._v(" 栈内存")]),s._v(" "),t("p",[s._v("栈内存其实就是"),t("RouterLink",{attrs:{to:"/frontend/javascript/call-stack.html"}},[s._v("调用栈")]),s._v("，用于"),t("strong",[s._v("存储执行上下文")]),s._v("。当执行一段代码时，需要"),t("strong",[s._v("先编译并创建执行上下文")]),s._v("，然后按照顺序执行代码。")],1),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" a "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"233"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 保存在test执行上下文中的变量环境")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" b "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 保存在test执行上下文中的变量环境")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// JavaScript引擎判断右侧值为引用类型，引擎并非直接将其存放到变量环境，而是分配到堆内存，分配后会有一个堆地址；")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 最后将堆地址写入到c变量值")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" c "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"233"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// JavaScript中，原始类型的赋值会完整复制变量值，而引用类型的赋值是复制引用地址。")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" d "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// test执行上下文入栈")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"为什么原始数据类型直接存在栈-引用类型值存在堆还需要通过栈中的引用地址来访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为什么原始数据类型直接存在栈-引用类型值存在堆还需要通过栈中的引用地址来访问"}},[s._v("#")]),s._v(" 为什么原始数据类型直接存在栈，引用类型值存在堆还需要通过栈中的引用地址来访问？")]),s._v(" "),t("p",[s._v("因为JavaScript引擎需要用栈来维护程序执行期间上下文的状态，如果栈内存很大了话，所有数据都存放在栈内存中，会影响到"),t("strong",[s._v("上下文切换的效率")]),s._v("，从而影响到整个程序的执行效率。当函数执行结束，当前执行上下文被回收，JavaScript引擎离开当前执行上下文，只需要将指针移动到上一个执行上下文地址即可。"),t("br")]),s._v(" "),t("ol",[t("li",[s._v("栈内存一般不会设置太大，主要存放一些原始类型的小数据。")]),s._v(" "),t("li",[s._v("引用类型的数据一般占内存都比较大，所以一般会被存放到堆中，堆空间很大，缺点是"),t("strong",[s._v("分配内存和回收内存都会占用一定的时间")]),s._v("。\n"),t("img",{attrs:{src:"https://s2.loli.net/2022/09/30/smIWCT8ZVXrlSPN.png",alt:"JS栈内存.png"}})])]),s._v(" "),t("h2",{attrs:{id:"闭包的内存模型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#闭包的内存模型"}},[s._v("#")]),s._v(" 闭包的内存模型")]),s._v(" "),t("p",[s._v("作用域内：")]),s._v(" "),t("ul",[t("li",[s._v("原始类型数据会被存储到栈空间")]),s._v(" "),t("li",[s._v("引用类型会被存储到堆空间")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" myName "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mobs"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" test1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" test2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" innerBar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n        "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("setName")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("newName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            myName "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" newName\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("getName")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("test1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" myName\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" innerBar\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" bar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nbar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"233"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nbar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 233")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h3",{attrs:{id:"代码执行分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码执行分析"}},[s._v("#")]),s._v(" 代码执行分析")]),s._v(" "),t("ul",[t("li",[s._v("因为变量myName、test1、test2是原始类型数据，所以foo函数执行将他们压入栈。")]),s._v(" "),t("li",[s._v("当foo函数执行结束完毕，调用栈中foo函数的执行上下文会被销毁，其内部变量myName、test1、test2也应该一同被销毁。")]),s._v(" "),t("li",[s._v("但实际上myName、test1还是能访问到的。")])]),s._v(" "),t("p",[s._v("产生闭包的流程：")]),s._v(" "),t("ul",[t("li",[s._v("当JavaScript引擎执行到foo函数时 => 首先编译、并创建一个空执行上下文。")]),s._v(" "),t("li",[s._v("在编译过程中，JavaScript引擎要对内部函数做一次快速的"),t("strong",[s._v("词法扫描")]),s._v("，扫描到内部函数setName，发现setName引用了foo函数中的myName变量，由于"),t("strong",[s._v("内部函数引用了外部函数的变量")]),s._v("，JavaScript引擎就判断这是"),t("strong",[s._v("闭包")]),s._v("，会在堆空间创建一个“closure(foo)”的对象（内部对象，JavaScript无法访问），用来保存myName变量。")]),s._v(" "),t("li",[s._v("继续扫描到getName方法时，发现其内部引用变量test1，于是JavaScript引擎又将test1添加到“closure(foo)”对象中。此时堆中的“closure(foo)”对象中就包含了myName和test1两个变量了。")]),s._v(" "),t("li",[s._v("由于test2并没有被内部函数引用，所以test2仍然只保存在调用栈中。")]),s._v(" "),t("li",[s._v("当foo函数执行完毕退出，return的setName、getName方法依旧都引用了“clourse(foo)”对象。")]),s._v(" "),t("li",[s._v("下次调用bar.setName、bar.getName时，创建的执行上下文中就包含了“clourse(foo)”对象。")])]),s._v(" "),t("h3",{attrs:{id:"产生闭包的核心"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#产生闭包的核心"}},[s._v("#")]),s._v(" 产生闭包的核心")]),s._v(" "),t("ol",[t("li",[s._v("预扫描内部函数。")]),s._v(" "),t("li",[s._v("把内部函数引用的外部变量保存到堆中。")])]),s._v(" "),t("p",[t("RouterLink",{attrs:{to:"/frontend/javascript/closure.html"}},[s._v("闭包详情")])],1),s._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("ul",[t("li",[s._v("JavaScript动态（无需主动声明变量数据类型，运行时确定）、弱类型（支持隐式数据类型转换）。")]),s._v(" "),t("li",[s._v("JavaScript变量没有数据类型，值才有数据类型，所以变量可以随时持有任何类型的数据。")]),s._v(" "),t("li",[s._v("JavaScript有8种数据类型，分为两大类 => 原始类型、引用类型。")]),s._v(" "),t("li",[s._v("原始类型的变量赋值会相互独立、互不影响；引用类型的变量赋值，两个变量都同时指向了堆中的同一块数据，互相影响。")]),s._v(" "),t("li",[s._v("原始类型存在栈中，引用类型的数据是存在堆中。")]),s._v(" "),t("li",[s._v("堆中的数据是通过引用地址和变量关联起来的。")]),s._v(" "),t("li",[s._v("内部函数引用外部的变量会作为闭包保存到堆中。")])])])}),[],!1,null,null,null);t.default=r.exports}}]);
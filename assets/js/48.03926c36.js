(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{460:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),t("p",[s._v("浏览器本地存储主要的四种方式：")]),s._v(" "),t("ul",[t("li",[s._v("Cookie")]),s._v(" "),t("li",[s._v("LocalStorage")]),s._v(" "),t("li",[s._v("SessionStorage")]),s._v(" "),t("li",[s._v("IndexedDB")])]),s._v(" "),t("h2",{attrs:{id:"cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[s._v("#")]),s._v(" Cookie")]),s._v(" "),t("p",[s._v("Cookie（小型文本文件），一般是服务端发送到用户浏览器保存在本地的数据，浏览器下次发起请求会带上cookie发送给服务端，解决了HTTP无状态导致的问题。"),t("br"),s._v("\n常见的应用场景就是"),t("strong",[s._v("保持用户登录状态")]),s._v("。需要注意，如果不使用"),t("strong",[s._v("HTTPS对请求进行加密")]),s._v("，cookie信息容易泄露导致安全问题，利用你的cookie伪造你登录网站。"),t("br"),s._v("\n文件大小一般不超过4KB，由Name - Value和几个可选属性（有效期、安全性）组成。"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies",target:"_blank",rel:"noopener noreferrer"}},[s._v("MDN - HTTP Cookie"),t("OutboundLink")],1),t("br"),s._v("\n常见属性：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Cookie过期时间 =>  过期时间的设置，只影响客户端行为，无关服务端。")]),s._v("\nExpires"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Wed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2015")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("07")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GMT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Cookie经过多少秒失效 =>优先级高于Expires")]),s._v("\nMax"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Age"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23333")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 指定了哪些主机可以接受Cookie")]),s._v("\nDomain"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mozilla"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 标识指定了主机下的哪些路径可以接受Cookie => 这个路径必须出现请求资源的路径上才会发送Cookie")]),s._v("\nPath"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docs\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 标记为Secure的Cookie只能被HTTPS协议加密过的请求发送给服务端")]),s._v("\nSecure\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("常用操作：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("document"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookie "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Name=Value'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 服务端设置Cookie")]),s._v("\nSet"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Cookie"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("aa"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" domain"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("aa"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("net"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" # \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 客户端设置Cookie")]),s._v("\ndocument"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookie "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("bb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" domain"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("aa"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("net"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" # \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Cookie删除一般就是设置过期时间，到期浏览器自动删除。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"localstorage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#localstorage"}},[s._v("#")]),s._v(" LocalStorage")]),s._v(" "),t("p",[s._v("特性：")]),s._v(" "),t("ul",[t("li",[s._v("生命周期："),t("strong",[s._v("持久化的本地存储")]),s._v("，除非主动删除数据，否则永远不会过期。")]),s._v(" "),t("li",[s._v("localStorage中的键值以字符串的形式存储 => 注意会把number自动转成string。")]),s._v(" "),t("li",[s._v("localStorage本质上是对字符串的读取，如果存储内容多的话会消耗内存空间，会导致页面变卡。")]),s._v(" "),t("li",[s._v("同一域中存储的信息是共享的，受同源策略的限制。")]),s._v(" "),t("li",[s._v("大小：5M（跟浏览器厂商有关）。")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("localStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'username'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mobs'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nlocalStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'username'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取第一个键名")]),s._v("\nlocalStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nlocalStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("removeItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'username'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 一次性清除所有存储")]),s._v("\nlocalStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("clear")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("缺陷：")]),s._v(" "),t("ul",[t("li",[s._v("无法像Cookie一样设置过期时间")]),s._v(" "),t("li",[s._v("只能存入字符串，无法直接存对象")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("localStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'key'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// '[object, Object]'")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("localStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'key'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"sessionstorage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sessionstorage"}},[s._v("#")]),s._v(" SessionStorage")]),s._v(" "),t("p",[s._v("sessionStorage和localStorage使用方法基本一致，唯一不同的是生命周期，"),t("strong",[s._v("一旦页面（会话）关闭，sessionStorage将会删除数据。")])]),s._v(" "),t("h2",{attrs:{id:"indexeddb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#indexeddb"}},[s._v("#")]),s._v(" IndexedDB")]),s._v(" "),t("p",[s._v("一般用于客户端存储大量结构化数据(文件、blobs)，使用索引来实现对数据的高性能搜索。"),t("br"),s._v("\nWeb Storage对于存储少量的数据很有用，但对于存储更大量的结构化数据就不太合适，所以提供了一个IndexedDB解决方案。"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API",target:"_blank",rel:"noopener noreferrer"}},[s._v("MDN - IndexedDB"),t("OutboundLink")],1),t("br"),s._v("\n特性：")]),s._v(" "),t("ul",[t("li",[s._v("储存量理论上没有上限。")]),s._v(" "),t("li",[s._v("所有操作都是异步的，相比LocalStorage同步操作性能更高，尤其是数据量较大时。")]),s._v(" "),t("li",[s._v("原生支持储存JS的对象。")]),s._v(" "),t("li",[s._v("是个数据库。")])]),s._v(" "),t("h2",{attrs:{id:"应用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[s._v("#")]),s._v(" 应用场景")]),s._v(" "),t("ul",[t("li",[s._v("标记、跟踪用户行为，推荐使用cookie。")]),s._v(" "),t("li",[s._v("适合长期保存在本地的数据（令牌），推荐使用localStorage。")]),s._v(" "),t("li",[s._v("敏感账号一次性登录，推荐使用sessionStorage。")]),s._v(" "),t("li",[s._v("存储大量数据的情况、在线文档（富文本编辑器）保存编辑历史的情况，推荐使用indexedDB。")])]),s._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("p",[s._v("cookie、sessionStorage、localStorage三者的区别：")]),s._v(" "),t("ul",[t("li",[s._v("存储大小："),t("br"),s._v("\ncookie数据大小不能超过4k；"),t("br"),s._v("\nsessionStorage和localStorage虽然也有存储大小的限制，但比cookie大可以达到5M或更大；")]),s._v(" "),t("li",[s._v("有效时间："),t("br"),s._v("\ncookie设置的过期时间之前一直有效，即使浏览器关闭；"),t("br"),s._v("\nlocalStorage存储持久数据，浏览器关闭后数据不丢失除非主动删除数据；"),t("br"),s._v("\nsessionStorage数据在浏览器关闭后自动删除；")]),s._v(" "),t("li",[s._v("数据与服务器之间的交互方式："),t("br"),s._v("\ncookie的数据会自动的传给服务器，服务器端也可以写cookie到客户端；"),t("br"),s._v("\nsessionStorage和localStorage不会自动把数据发给服务器，仅在本地保存；")])])])}),[],!1,null,null,null);t.default=e.exports}}]);
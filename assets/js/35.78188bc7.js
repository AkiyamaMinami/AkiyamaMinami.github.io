(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{447:function(v,_,t){"use strict";t.r(_);var r=t(2),s=Object(r.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h2",{attrs:{id:"前言"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[v._v("#")]),v._v(" 前言")]),v._v(" "),_("p",[v._v("总览流程：")]),v._v(" "),_("ul",[_("li",[v._v("输入URL\n"),_("ul",[_("li",[v._v("浏览器检查URL。")]),v._v(" "),_("li",[v._v("组装协议构建完整URL。")])])]),v._v(" "),_("li",[v._v("URL请求\n"),_("ul",[_("li",[v._v("浏览器进程IPC通信网络进程进行URL请求。")]),v._v(" "),_("li",[v._v("网络进程检查本地缓存，有缓存直接返回资源给浏览器进程。")]),v._v(" "),_("li",[v._v("没缓存，进行DNS解析获取IP。")]),v._v(" "),_("li",[v._v("利用IP地址建立TCP连接。")]),v._v(" "),_("li",[v._v("构建请求信息，发送HTTP请求。")]),v._v(" "),_("li",[v._v("目标服务器响应，网络进程接收响应信息并解析。")]),v._v(" "),_("li",[v._v("检查状态码、Content-Type。")])])]),v._v(" "),_("li",[v._v("启动渲染进程\n"),_("ul",[_("li",[v._v("检查URL是否为同一站点，复用渲染进程。")])])]),v._v(" "),_("li",[v._v("传输数据、页面更新\n"),_("ul",[_("li",[v._v("网络进程传输响应信息给渲染进程。")]),v._v(" "),_("li",[v._v("渲染进程接收完毕，通知浏览器文档提交确认，同时渲染进程开始渲染。")]),v._v(" "),_("li",[v._v("浏览器进程完成更新页面。")])])])]),v._v(" "),_("p",[_("img",{attrs:{src:"https://s2.loli.net/2022/08/23/2yfvQgTzMEP7LA3.png",alt:"浏览器导航流程.png"}})]),v._v(" "),_("h2",{attrs:{id:"输入url"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#输入url"}},[v._v("#")]),v._v(" 输入URL")]),v._v(" "),_("p",[v._v("用户在地址栏输入关键字。"),_("br"),v._v("\nURL是否合法 ?  "),_("strong",[v._v("开始请求https://URL")]),v._v("  :  "),_("strong",[v._v("使用默认搜索引擎进行关键字搜索")])]),v._v(" "),_("h2",{attrs:{id:"url请求"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#url请求"}},[v._v("#")]),v._v(" URL请求")]),v._v(" "),_("p",[v._v("浏览器进程通过IPC（进程通信）把URL请求发送给网络进程，网络进程接受到，发起URL请求。")]),v._v(" "),_("ol",[_("li",[v._v("本地缓存检查 ? 返回资源给浏览器进程 : "),_("strong",[v._v("DNS解析")]),v._v("。")]),v._v(" "),_("li",[v._v("拿到请求域名的"),_("strong",[v._v("服务器IP")]),v._v("，如果请求协议是https，还需要建立TLS（Transport Layer Security）连接。")]),v._v(" "),_("li",[v._v("根据IP地址和目标服务器建立"),_("strong",[v._v("TCP连接")]),v._v("。")]),v._v(" "),_("li",[v._v("浏览器构建请求行、请求头（cookie等数据）向目标服务器发送构建的请求信息（"),_("strong",[v._v("HTTP请求")]),v._v("）。")]),v._v(" "),_("li",[v._v("目标服务器接受到请求信息，根据请求信息生成"),_("strong",[v._v("响应数据")]),v._v("（响应行、响应头、响应体），发送给浏览器的"),_("strong",[v._v("网络进程")]),v._v("。")]),v._v(" "),_("li",[v._v("网络进程接受到响应行和响应头（统一为响应信息），开始解析响应数据。")])]),v._v(" "),_("h3",{attrs:{id:"重定向"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#重定向"}},[v._v("#")]),v._v(" 重定向")]),v._v(" "),_("p",[v._v("如果网络进程接受到的响应信息中的状态码是"),_("strong",[v._v("301 or 302")]),v._v("，代表需要浏览器"),_("strong",[v._v("重定向到其他的URL")]),v._v("，此时网络进程从响应信息中的"),_("strong",[v._v("Location字段")]),v._v("获取重定向的地址，"),_("strong",[v._v("再次发起新的HTTPS or HTTP请求，重复上述的流程")]),v._v("。"),_("br"),v._v("\n如果服务器返回的响应信息中状态码是"),_("strong",[v._v("200")]),v._v("，代表一切正常，浏览器可以继续处理请求。")]),v._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"title"}),_("p",[v._v("301 => 永久重定向。会缓存新域名替换旧域名，用户访问旧域名使用301重定向到新域名。"),_("br"),v._v("\n302 => 临时重定向。不会缓存，一般用于未登陆的用户重定向到登录页。")])]),_("h3",{attrs:{id:"响应数据类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#响应数据类型"}},[v._v("#")]),v._v(" 响应数据类型")]),v._v(" "),_("p",[v._v("浏览器如何区分URL请求是一个正常的HTML or 下载请求呢？使用响应信息中的"),_("strong",[v._v("Content-Type")]),v._v("字段进行区分。")]),v._v(" "),_("ul",[_("li",[v._v("Content-Type: text/html"),_("br"),v._v("\n告诉浏览器服务器返回的数据是HTML格式。")]),v._v(" "),_("li",[v._v("Content-Type: application/octet-stream"),_("br"),v._v("\n返回的数据是字节流类型的，一般浏览器按照下载类型来处理。"),_("br")])]),v._v(" "),_("p",[v._v("不同的Content-Type，浏览器后续的处理也会不同。"),_("br")]),v._v(" "),_("ul",[_("li",[v._v("如果判断为下载类型 => 该请求会被提交给浏览器的下载管理器，同时URL请求的导航流程就此结束。")]),v._v(" "),_("li",[v._v("如果是HTML => 浏览器会继续进行导航流程，Chrome的页面渲染是运行在渲染进程中的，所以接下来需要开始"),_("strong",[v._v("准备渲染进程")]),v._v("了。")])]),v._v(" "),_("h2",{attrs:{id:"渲染进程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#渲染进程"}},[v._v("#")]),v._v(" 渲染进程")]),v._v(" "),_("ul",[_("li",[v._v("一般情况，打开新的页面都会使用单独的渲染进程。")]),v._v(" "),_("li",[v._v("若从A页面打开B页面，且AB页面属于"),_("strong",[v._v("同一站点")]),v._v("，B页面会复用A页面渲染进程，否则浏览器会为B创建一个新的渲染进程。")])]),v._v(" "),_("h3",{attrs:{id:"同一站点-same-site"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#同一站点-same-site"}},[v._v("#")]),v._v(" 同一站点（same-site）")]),v._v(" "),_("p",[v._v("根域名 + 加上协议（https:// or http://）。")]),v._v(" "),_("h2",{attrs:{id:"文档提交"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#文档提交"}},[v._v("#")]),v._v(" 文档提交")]),v._v(" "),_("p",[v._v("文档 => URL请求接收的"),_("strong",[v._v("响应体数据")]),v._v("。"),_("br")]),v._v(" "),_("ol",[_("li",[v._v("浏览器进程，发起“文档提交”通知，将渲染进程和网络进程建立传输通道。")]),v._v(" "),_("li",[v._v("文档数据传输完毕，渲染进程发出“确认提交”通知告诉浏览器进程。")]),v._v(" "),_("li",[v._v("浏览器接收到通知，开始更新浏览器界面状态（安全状态、地址栏的URL、前进后退的历史状态），同时更新页面。")])]),v._v(" "),_("h2",{attrs:{id:"页面渲染"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#页面渲染"}},[v._v("#")]),v._v(" 页面渲染")]),v._v(" "),_("ol",[_("li",[v._v("当文档提交完毕，渲染进程开始"),_("strong",[v._v("页面解析")]),v._v("和"),_("strong",[v._v("资源加载")]),v._v("。")]),v._v(" "),_("li",[v._v("当页面渲染完成，渲染进程发出消息通知浏览器进程，tab页上的loading效果停止。至此浏览器导航完成。")])]),v._v(" "),_("h2",{attrs:{id:"总结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[v._v("#")]),v._v(" 总结")]),v._v(" "),_("ul",[_("li",[v._v("服务器可以通过响应头来控制浏览器的行为（跳转、网络数据类型判断）。")]),v._v(" "),_("li",[v._v("Chrome默认采用一个标签对应一个渲染进程，但是如果两个页面属于同一站点，则共用一个渲染进程。")]),v._v(" "),_("li",[v._v("浏览器进程是网络进程和渲染进程之间的桥梁。")])])])}),[],!1,null,null,null);_.default=s.exports}}]);